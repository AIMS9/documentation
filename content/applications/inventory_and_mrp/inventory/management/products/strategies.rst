==================================
Selecting a replenishment strategy
==================================

In Odoo, there are two strategies for automatically replenishing inventory: :guilabel:`Reordering
Rules` and the :guilabel:`Make to Order (MTO)` route. Although these strategies differ slightly,
they both have similar consequences: triggering the automatic creation of a purchase or
manufacturing order. The choice of which strategy to use depends on the business's manufacturing and
delivery processes.


Terminology
===========

Replenishment report and reordering rules
-----------------------------------------

The :guilabel:`Replenishment Report` is a list of all products that have a negative forecast
quantity.

:guilabel:`Reordering Rules` are used to ensure that there's always a minimum amount of a product in
stock in order to manufacture products and/or fulfill sales orders. When the stock level of a
product reaches its minimum, Odoo automatically generates a purchase order with the quantity needed
to reach the maximum stock level.

Reordering rules can be created and managed in the replenishment report or from the product form.

Make to order
-------------

:guilabel:`Make to Order (MTO)` is a procurement route that creates a draft purchase order or
manufacturing order each time a sales order is confirmed, *regardless of the current stock level*.
Unlike products replenished using reordering rules, Odoo automatically links the sales order to the
purchase order (PO) or manufacturing order (MO) generated by the MTO route. Another difference
between reordering rules and MTO is with MTO, Odoo generates a draft PO or MO immediately after the
sales order is confirmed. With reordering rules, Odoo generates a draft PO or MO when the product's
forecasted stock falls below the set minimum quantity. In addition, Odoo will automatically add
quantities to the PO/MO as the forecast changes, as long as the PO/MO is not confirmed.
The MTO route is the best replenishment strategy for products that are customized and/or no stock is
kept on hand.


Configuration
=============

Replenishment report and reordering rules
-----------------------------------------

To access the replenishment report, go to :menuselection:`Inventory --> Operations -->
Replenishment.` By default, the replenishment report shows every product that needs to be manually
reordered. If there is no specific rule for a product, Odoo assumes that the Minimum Quantity and
Maximum Quantity stock are both `0.00`

.. image:: strategies/replenish-report-v14.png
   :align: center
   :alt: Replenishment report listing all items needing to be purchased to meet current needs.

.. note::
   For products that don't have a set reordering rule, Odoo calculates the forecast based on
   confirmed sales orders, deliveries, and receipts. For products that have a set reordering rule,
   Odoo calculates the forecast normally, but also takes into account the purchase/manufacturing
   lead time and security lead time.

Before creating a new reordering rule, make sure the product has a vendor or a bill of materials
configured on the product form, and the product type is set to :guilabel:`Storable Product`. By
definition, a consumable product does not have its inventory levels tracked, so Odoo can not account
for a consumable product in the replenishment report. To create a new reordering rule from the
replenishment report, go to :menuselection:`Inventory --> Operations --> Replenishment`, click
:guilabel:`Create`, and select the product. If desired, set a :guilabel:`Min Quantity` and a
:guilabel:`Max Quantity`.

To create a new reordering rule from the product form, go to :menuselection:`Inventory --> Products
--> Products`, and select a product to open its product form. Click the :guilabel:`Reordering Rules`
smart button, click :guilabel:`Create`, and fill out the fields.

By default, the quantity in the :guilabel:`To Order` field is the quantity required to reach the set
:guilabel:`Max Quantity`. However, the :guilabel:`To Order` quantity can be adjusted by clicking on
the field and, changing the value, and clicking :guilabel:`Save`. To replenish a product manually,
click :guilabel:`Order Once`.

To automate a replenishment, click :guilabel:`Automate Orders`. When this button is clicked, Odoo
will automatically generate a draft :abbr:`PO (purchase order)`/:abbr:`MO (manufacturing order)`
every time the forecasted stock level falls below the set :guilabel:`Min Quantity` of the reordering
rule.

A reordering rule or manual replenishment can be temporarily deactivated for a given period by using
the :guilabel:`Snooze` button.

.. image:: strategies/reordering-rule-snooze-settings.png
   :align: center
   :alt: Snooze options to turn off notifications for reordering for a period of time.

A PO or MO created by a manual replenishment will have :guilabel:`Replenishment Report` as the
source document. A PO or MO created by an automated reordering rule will have the sales order(s)
reference number(s) that triggered the rule as the source document.

.. image:: strategies/rfq-source-document.png
   :align: center
   :alt: Quote request list shows which quotes are directly from the replenishment report.


Make to order
=============

Since the Make to Order (MTO) route is recommended for customized products, the route is hidden by
default.

To activate the Make to Order (MTO) route in Odoo:
 #. Go to :menuselection:`Inventory --> Configuration  --> Settings`.
 #. Activate the Multi-Step Routes setting under :guilabel:`Warehouse` and click :guilabel:`Save`.
 #. Go to :menuselection:`Inventory --> Configuration  --> Routes`.
 #. Click on :menuselection:`Filters --> Archived` to show archived routes.
 #. Select the checkbox next to :guilabel:`Replenish on Order (MTO)`, and click on
    :menuselection:`Action --> Unarchive`.

.. note::
   Activating the Multi-Step Routes setting also activates Storage Locations. If these features
   aren't applicable to the warehouse, disable these settings after unarchiving the MTO route.

To set a product's procurement route to MTO, go to :menuselection:`Inventory --> Products -->
Products`, click on a product to open the product form, and click :guilabel:`Edit`. Then, click on
the Inventory tab and in the :guilabel:`Routes` options, select :guilabel:`Replenish on Order (MTO)`.
For products purchased directly from a vendor, make sure the :guilabel:`Buy` route is selected in
addition to the :guilabel:`Replenish on Order (MTO)` route and a vendor is configured in the
purchase tab. For products manufactured in-house, make sure the :guilabel:`Manufacture` route is
selected in addition to the :guilabel:`MTO` route and a bill of materials is configured for the
product. Finally, click :guilabel:`Save`.

.. note::
   The MTO route cannot be selected alone. MTO will only work with the Manufacture or Buy route also
   selected.

.. image:: strategies/acoustic-block-screen.png
   :align: center
   :alt: Replenish on Order selected on the product form.
